<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>配列の概要 - Xarpite</title>
  <meta name="description" content="An interpreted language for one-liners">
  <link rel="stylesheet" href="/xarpite/assets/css/style.css">
  <link rel="icon" type="image/svg+xml" href="/xarpite/assets/images/xarpite-icon.svg">
  <script src="/xarpite/assets/js/main.js" defer></script>
</head>
<body>
  <div class="page-wrapper">
    <header class="site-header">
      <div class="container">
        <div class="header-content">
          <a href="/xarpite/" class="logo-link">
            <img src="/xarpite/assets/images/xarpite-icon.svg" alt="Xarpite Icon" class="logo-icon">
            <span class="logo-text">Xarpite</span>
          </a>
          <nav class="main-nav">
            <a href="/xarpite/docs/ja/" class="nav-link">ドキュメント</a>
            <a href="https://github.com/MirrgieRiana/xarpite" class="nav-link" target="_blank">GitHub</a>
            <a href="https://mirrgieriana.github.io/xarpite/playground/" class="nav-link playground-link" target="_blank">Playground</a>
          </nav>
        </div>
      </div>
    </header>

    <main class="main-content">
      <div class="container">
        <div class="content-wrapper">
          <aside class="sidebar">
            <nav class="doc-nav">
              <h3 class="nav-title">ドキュメント</h3>
              <ul class="nav-list">
                <li><a href="/xarpite/docs/ja/">トップ</a></li>
                <li><a href="/xarpite/docs/ja/syntax.html">文法</a></li>
                <li><a href="/xarpite/docs/ja/statement.html">文・式</a></li>
                <li><a href="/xarpite/docs/ja/whitespace.html">空白・コメント</a></li>
                <li><a href="/xarpite/docs/ja/variable.html">変数</a></li>
                <li><a href="/xarpite/docs/ja/number.html">数値</a></li>
                <li><a href="/xarpite/docs/ja/string.html">文字列</a></li>
                <li><a href="/xarpite/docs/ja/regex.html">正規表現</a></li>
                <li><a href="/xarpite/docs/ja/blob.html">BLOB</a></li>
                <li><a href="/xarpite/docs/ja/comparison.html">比較</a></li>
                <li><a href="/xarpite/docs/ja/boolean.html">論理値・条件分岐</a></li>
                <li><a href="/xarpite/docs/ja/jump.html">リターン・エラー処理</a></li>
                <li><a href="/xarpite/docs/ja/property.html">プロパティアクセス</a></li>
                <li><a href="/xarpite/docs/ja/array.html">配列</a></li>
                <li><a href="/xarpite/docs/ja/object.html">オブジェクト</a></li>
                <li><a href="/xarpite/docs/ja/function.html">関数</a></li>
                <li><a href="/xarpite/docs/ja/stream.html">ストリーム・代入・パイプ系演算子</a></li>
                <li><a href="/xarpite/docs/ja/builtin.html">組み込み定数・関数</a></li>
                <li><a href="/xarpite/docs/ja/data_conversion.html">データ変換系関数</a></li>
                <li><a href="/xarpite/docs/ja/samples.html">サンプル</a></li>
                <li><a href="/xarpite/docs/ja/cli.html">コマンドラインツール</a></li>
                <li><a href="/xarpite/docs/ja/js.html">JavaScript版</a></li>
                <li><a href="/xarpite/docs/ja/coroutine.html">コルーチン</a></li>
                <li><a href="/xarpite/docs/ja/json.html">JSON操作</a></li>
              </ul>
            </nav>
          </aside>

          <article class="doc-content">
            
            
              
              
              
              
              
                
                  <div class="table-of-contents">
  <ul id="markdown-toc"><li><a href="#配列の概要">配列の概要</a></li><li><a href="#配列の生成">配列の生成</a><ul id="markdown-toc"><li><a href="#配列リテラルのセパレータ">配列リテラルのセパレータ</a></li><li><a href="#ストリームによる配列の生成">ストリームによる配列の生成</a></li></ul></li><li><a href="#配列の要素の参照">配列の要素の参照</a><ul id="markdown-toc"><li><a href="#配列呼び出し">配列呼び出し</a><ul id="markdown-toc"><li><a href="#範囲外のインデックス">範囲外のインデックス</a></li><li><a href="#負のインデックス">負のインデックス</a></li><li><a href="#インデックスのストリーム">インデックスのストリーム</a></li><li><a href="#インデックスの評価方法">インデックスの評価方法</a></li><li><a href="#配列のストリーム化">配列のストリーム化</a></li><li><a href="#部分配列の取得">部分配列の取得</a></li><li><a href="#配列の複製">配列の複製</a></li><li><a href="#配列呼び出しへの代入">配列呼び出しへの代入</a></li></ul></li><li><a href="#配列要素のプロパティアクセス">配列要素のプロパティアクセス</a><ul id="markdown-toc"><li><a href="#プロパティアクセスによる代入">プロパティアクセスによる代入</a></li><li><a href="#式によるプロパティアクセス">式によるプロパティアクセス</a></li><li><a href="#プロパティアクセスの制限">プロパティアクセスの制限</a></li><li><a href="#プロパティアクセスの連鎖">プロパティアクセスの連鎖</a></li></ul></li></ul></li><li><a href="#配列の長さの取得">配列の長さの取得</a></li><li><a href="#配列の連結">配列の連結</a></li><li><a href="#配列の両端に追加削除するメソッド">配列の両端に追加・削除するメソッド</a><ul id="markdown-toc"><li><a href="#ストリームの-unshift-push">ストリームの unshift push</a></li></ul></li></ul>
</div>


<h1 id="配列の概要">配列の概要</h1>

<p>配列は、順序によって管理される複数の要素を扱うデータ構造です。</p>

<p>Xarpiteにおける配列は可変であり、要素の代入や長さの変更が可能です。</p>

<p>配列のインデックスは0から始まります。</p>

<h1 id="配列の生成">配列の生成</h1>

<p>配列は配列リテラル <code class="language-plaintext highlighter-rouge">[value; ...]</code> によって生成します。</p>

<p>角括弧内には、 <code class="language-plaintext highlighter-rouge">;</code> で区切って0個以上の値を書くことができます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'[1; 2; 3]'</span>
<span class="c"># [1;2;3]</span>
</code></pre></div></div>

<h2 id="配列リテラルのセパレータ">配列リテラルのセパレータ</h2>

<p>配列リテラル内での <code class="language-plaintext highlighter-rouge">;</code> の記述は柔軟です。</p>

<p>項の前後や中間に <code class="language-plaintext highlighter-rouge">;</code> を余計に多く書いても問題ありません。</p>

<p>また、改行は <code class="language-plaintext highlighter-rouge">;</code> の代わりになります。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  [
    1
    2
    ; ; ; 3; ; ;
  ]
'</span>
<span class="c"># [1;2;3]</span>
</code></pre></div></div>

<h2 id="ストリームによる配列の生成">ストリームによる配列の生成</h2>

<p><code class="language-plaintext highlighter-rouge">;</code> で区切られた項がストリームである場合、ストリームそのものではなく、ストリームの各要素が配列に格納されます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'[1 .. 3; 4, 5, 6]'</span>
<span class="c"># [1;2;3;4;5;6]</span>

<span class="nv">$ </span>xa <span class="s1">'
  [
    1 .. 3 | _ * 10
    4 .. 6 | _ * 100
  ]
'</span>
<span class="c"># [10;20;30;400;500;600]</span>
</code></pre></div></div>

<h1 id="配列の要素の参照">配列の要素の参照</h1>

<p>Xarpiteにおいて、配列の要素にアクセスする手段は大きく二つに分かれます。</p>

<ul>
  <li>配列呼び出し</li>
  <li>配列要素のプロパティアクセス</li>
</ul>

<h2 id="配列呼び出し">配列呼び出し</h2>

<p>配列は、インデックスを受け取って要素を返す関数 <code class="language-plaintext highlighter-rouge">array(index)</code> として扱うことができます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array(2)
'</span>
<span class="c"># two</span>
</code></pre></div></div>

<p>このため、Xarpiteでは配列の要素を得るのに角括弧 <code class="language-plaintext highlighter-rouge">[ ]</code> ではなく丸括弧 <code class="language-plaintext highlighter-rouge">( )</code> を使用します。</p>

<h3 id="範囲外のインデックス">範囲外のインデックス</h3>

<p>範囲外のインデックスを指定した場合、 <code class="language-plaintext highlighter-rouge">NULL</code> が返されます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array(5)
'</span>
<span class="c"># NULL</span>
</code></pre></div></div>

<h3 id="負のインデックス">負のインデックス</h3>

<p>インデックスが負の場合、配列の末尾からの相対位置として解釈されます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array(-1)
'</span>
<span class="c"># four</span>
</code></pre></div></div>

<h3 id="インデックスのストリーム">インデックスのストリーム</h3>

<p>インデックスはストリームであってもかまいません。</p>

<p>その場合、ストリームの各要素のインデックスに対応する配列要素のストリームが返されます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array(2, 4, 0)
'</span>
<span class="c"># two</span>
<span class="c"># four</span>
<span class="c"># zero</span>
</code></pre></div></div>

<hr />

<p>これにより、配列は、ストリームを加工する関数のように利用できます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  3 .. 1 &gt;&gt; array
'</span>
<span class="c"># three</span>
<span class="c"># two</span>
<span class="c"># one</span>
</code></pre></div></div>

<h3 id="インデックスの評価方法">インデックスの評価方法</h3>

<p>インデックスは、数値化したうえで四捨五入されます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array("2.95")
'</span>
<span class="c"># three</span>
</code></pre></div></div>

<hr />

<p>この性質により、計算上整数になる小数の計算結果を使ったアクセスが容易になります。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array(SQRT(16) - SQRT(9))
'</span>
<span class="c"># one</span>
</code></pre></div></div>

<h3 id="配列のストリーム化">配列のストリーム化</h3>

<p><code class="language-plaintext highlighter-rouge">array()</code> により、その配列のすべての要素を順番にイテレートするストリームが生成されます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array()
'</span>
<span class="c"># zero</span>
<span class="c"># one</span>
<span class="c"># two</span>
<span class="c"># three</span>
<span class="c"># four</span>
</code></pre></div></div>

<h3 id="部分配列の取得">部分配列の取得</h3>

<p><code class="language-plaintext highlighter-rouge">array[indices]</code> により、配列の部分配列を取得することができます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array[1 .. 3]
'</span>
<span class="c"># [one;two;three]</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">indices</code> は空ストリームや、ストリームでない単一のインデックスであってもかまいません。</p>

<hr />

<p>この文法は、配列のストリーム化と合わせて、 <code class="language-plaintext highlighter-rouge">array(indices)</code> と <code class="language-plaintext highlighter-rouge">array[indices]()</code> が等しいことを成り立たせます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array(1 .. 3)
'</span>
<span class="c"># one</span>
<span class="c"># two</span>
<span class="c"># three</span>

<span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array[1 .. 3]()
'</span>
<span class="c"># one</span>
<span class="c"># two</span>
<span class="c"># three</span>
</code></pre></div></div>

<p>この性質は、関数呼び出しと関数の部分適用の関係に似ています。</p>

<h3 id="配列の複製">配列の複製</h3>

<p><code class="language-plaintext highlighter-rouge">array[]</code> で配列の浅いコピーを生成します。</p>

<p>生成された配列に対する変更は、元の配列には反映されません。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="nt">-q</span> <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]
  new_array := array[]

  new_array(2) = 99999

  OUT &lt;&lt; array
  OUT &lt;&lt; new_array
'</span>
<span class="c"># [zero;one;two;three;four]</span>
<span class="c"># [zero;one;99999;three;four]</span>
</code></pre></div></div>

<p>言い換えると、配列の複製は、元のすべての要素を持つ部分配列の取得操作と同じです。</p>

<h3 id="配列呼び出しへの代入">配列呼び出しへの代入</h3>

<p><code class="language-plaintext highlighter-rouge">array(index) = value</code> により、配列の要素に値を代入できます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array(2) = 99999

  array
'</span>
<span class="c"># [zero;one;99999;three;four]</span>
</code></pre></div></div>

<h2 id="配列要素のプロパティアクセス">配列要素のプロパティアクセス</h2>

<p>配列要素のプロパティアクセス <code class="language-plaintext highlighter-rouge">array.index</code> は、配列要素に対する低レイヤーなアクセス手段を提供します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array.2
'</span>
<span class="c"># two</span>
</code></pre></div></div>

<h3 id="プロパティアクセスによる代入">プロパティアクセスによる代入</h3>

<p><code class="language-plaintext highlighter-rouge">array.index = value</code> により、配列要素に値を代入できます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array.2 = 99999

  array
'</span>
<span class="c"># [zero;one;99999;three;four]</span>
</code></pre></div></div>

<h3 id="式によるプロパティアクセス">式によるプロパティアクセス</h3>

<p><code class="language-plaintext highlighter-rouge">array.(index)</code> のように丸括弧で囲むことで、インデックスを式で指定できます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array.(1 + 2)
'</span>
<span class="c"># three</span>
</code></pre></div></div>

<h3 id="プロパティアクセスの制限">プロパティアクセスの制限</h3>

<p>配列呼び出しと異なり、以下の「気の利いた」機能は提供されません。</p>

<ul>
  <li>負のインデックス</li>
  <li>ストリームによるインデックスの指定</li>
  <li>部分配列の取得</li>
</ul>

<hr />

<p>その代わり、配列の要素にストリームを展開せずに直接代入することができます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array.2 = 1 .. 3

  array
'</span>
<span class="c"># [zero;one;123;three;four]</span>
</code></pre></div></div>

<h3 id="プロパティアクセスの連鎖">プロパティアクセスの連鎖</h3>

<p>プロパティアクセスは複数連続して書くことができます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array := [["one", "two"], ["three", "four"]]

  array.0.1
'</span>
<span class="c"># two</span>
</code></pre></div></div>

<h1 id="配列の長さの取得">配列の長さの取得</h1>

<p><code class="language-plaintext highlighter-rouge">$#array</code> により、配列の要素数を取得できます。</p>

<p>詳細は <a href="./length.md">長さの取得</a> を参照してください。</p>

<h1 id="配列の連結">配列の連結</h1>

<p>配列同士の加算 <code class="language-plaintext highlighter-rouge">array + array</code> は、左右の配列を連結した配列を新たに生成して返します。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  array1 := ["zero", "one"]
  array2 := ["two", "three"]

  array1 + array2
'</span>
<span class="c"># [zero;one;two;three]</span>
</code></pre></div></div>

<h1 id="配列の両端に追加削除するメソッド">配列の両端に追加・削除するメソッド</h1>

<p><code class="language-plaintext highlighter-rouge">unshift</code> <code class="language-plaintext highlighter-rouge">shift</code> <code class="language-plaintext highlighter-rouge">push</code> <code class="language-plaintext highlighter-rouge">pop</code> メソッドは、それぞれ配列の末尾・先頭に要素を追加・削除します。</p>

<p>これらのメソッドは、破壊的な操作を行います。</p>

<table>
  <thead>
    <tr>
      <th>メソッド</th>
      <th>操作対象</th>
      <th>操作内容</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">unshift</code></td>
      <td>先頭</td>
      <td>要素を追加</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">shift</code></td>
      <td>先頭</td>
      <td>要素を削除</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">push</code></td>
      <td>末尾</td>
      <td>要素を追加</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">pop</code></td>
      <td>末尾</td>
      <td>要素を削除</td>
    </tr>
  </tbody>
</table>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="nt">-q</span> <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array::unshift("minus one")
  OUT &lt;&lt; array

  array::shift()
  OUT &lt;&lt; array

  array::push("five")
  OUT &lt;&lt; array

  array::pop()
  OUT &lt;&lt; array
'</span>
<span class="c"># [minus one;zero;one;two;three;four]</span>
<span class="c"># [zero;one;two;three;four]</span>
<span class="c"># [zero;one;two;three;four;five]</span>
<span class="c"># [zero;one;two;three;four]</span>
</code></pre></div></div>

<h2 id="ストリームの-unshift-push">ストリームの <code class="language-plaintext highlighter-rouge">unshift</code> <code class="language-plaintext highlighter-rouge">push</code></h2>

<p><code class="language-plaintext highlighter-rouge">unshift</code> <code class="language-plaintext highlighter-rouge">push</code> メソッドにストリームを渡すと、そのストリームの各要素が配列に追加されます。</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="nt">-q</span> <span class="s1">'
  array := ["zero", "one", "two", "three", "four"]

  array::unshift("minus two", "minus one")
  OUT &lt;&lt; array

  array::push("five", "six")
  OUT &lt;&lt; array
'</span>
<span class="c"># [minus two;minus one;zero;one;two;three;four]</span>
<span class="c"># [minus two;minus one;zero;one;two;three;four;five;six]</span>
</code></pre></div></div>

                
              
            
          </article>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <div class="footer-content">
          <p class="footer-text">
            &copy; 2024-2025 <a href="https://github.com/MirrgieRiana" target="_blank" class="footer-link">MirrgieRiana</a>.
            <a href="https://github.com/MirrgieRiana/xarpite" target="_blank" class="footer-link">GitHub</a>
          </p>
        </div>
      </div>
    </footer>
  </div>
</body>
</html>
