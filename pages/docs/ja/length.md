---
title: "長さの取得 `$#value` / `$#_`"
---

<!-- toc -->

# 長さの取得 `$#value`

前置 `$#` 演算子は、値の「長さ」を取得します。

```shell
$ xa '$#"123"'
# 3

$ xa '$#[1, 2, 3]'
# 3

$ xa '$#{a: 1; b: 2; c: 3}'
# 3
```

---

この演算子は値のタイプによって異なるものを返します。

| タイプ    |                     |
|--------|---------------------|
| 文字列    | UTF16による文字の長さ       |
| 配列     | 要素数                 |
| オブジェクト | 親オブジェクトを無視した、エントリの数 |
| BLOB   | バイト数                |

---

長さの取得の実態は、値の `$#_` メソッドを呼び出すことで行われます。

オブジェクトの `$#_` メソッドをオーバーライドすることで、長さの取得処理を変更することができます。

```shell
$ xa '$#{`$#_`: this -> this.customLength}{customLength: 100}'
# 100
```

# メソッド形式 `$#_`

値の `$#_` メソッドを直接呼び出すこともできます。

```shell
$ xa '"123"::`$#_`()'
# 3

$ xa '[1, 2, 3]::`$#_`()'
# 3
```
