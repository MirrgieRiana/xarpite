# AIエージェント用指示ファイル

## 入力

### 山かっこ欠損バグ

あなたの入力に山かっこ `<` および `>` が現れたときは、変換器のバグを最大限に警戒してください。
あなたが実際に受け取った文字列は、真の原文と異なる可能性があります。

例えば、ダイナリダイナリ `>>` は、あなたには1個のダイナリ `>` として入力されます。
他には、ショウナリ何かダイナリ `<any>` は、あなたには空文字列に変換されて入力される場合があります。
これは少なくともIssue本文やプルリクエストコメント上などのテキストが影響を受けます。
そして、あなたは実際のダイナリの正確な数を知ることができません。
真の連続する山かっこの個数があなたが見ているものと異なる可能性について、常に注意を払わなければなりません。

このように、あなたは必ず、山かっこを最大限に注意深く取り扱わなければなりません。
さもなくば、あなたは事実誤認に基づいて、仕様が壊れていると一方的に決めつけ、ユーザーに事実に反する主張を繰り返し、
そしてあろうことか正しいプログラムやテストコード、コメント、ドキュメント等を片っ端から破壊して回ります。

## 編集

## ビルドと実行

**`jvmTest` 等の個別のテスト用Gradleタスクは、あなたに誤った情報を与えるだけで、何の役にも立ちません。**
**たとえどのような些細な編集であろうとも、テストには必ず `build` タスクを常に使用しなさい。**
さもなくば、あなたは真の失敗原因を見落とし、事実誤認に基づいてソースコードを破壊して回ります。

### テストコード

Xarpiteにはテストコードが存在します。
すべての機能はテストコードを伴い、テストを通過しなければなりません。
テストコードは、ドキュメント類において規定されるすべての仕様を丁度過不足なく検証しなければなりません。

#### Windows上でのEXEC呼び出しの問題

Windows環境での動作を考慮して、EXECの呼び出しを含むテストは必ずコマンドを `bash -c '...'` という形で記述しなければなりません。
更に、 `...` の部分には `$` を含む一部の文字を使用することができません。
最も安全なのは、実行したいコマンドのUTF-8バイト列を16進エンコードして、デコード部分のシェルスクリプトに直接埋め込むことです。

### ドキュメント

このプロジェクトにはドキュメントが存在します。
すべての言語機能は `/pages/docs` 以下に配置されているドキュメントの適切な位置に記載されなければなりません。
ただし、ビルドツールの使用方法など、言語機能に該当しないものをこれに含めてはなりません。

ドキュメントには複数の言語版が存在し、それらは意味論的に過不足なく一致する内容でなければなりません。
ドキュメントは流暢かつ自然に記述されていなければなりません。
ドキュメントは日本語が「正」であり、他言語版はその「翻訳版」です。

AIエージェントであるあなたは `/pages/docs` 以下にあるドキュメントをユーザーによる明示的に命令なしに編集してはいけません。
**ただし、ユーザーがあなたにドキュメントの編集を明示的に命令した場合、あなたは必ずそれを履行しなければなりません。**
そうでない場合、あなたはドキュメントを編集する代わりに、ドキュメントに対して必要な編集をユーザーに提案しなければなりません。

### 更新履歴

`CHANGELOG.md` の更新は断片ファイル `/changelog.d/${任意のタイトル}.md` に基づいて機械的に行われます。
断片ファイルは原則1行のテキストファイルで、大文字始まりによる過去形の英文による簡潔な更新点の説明を持ちます。
互いに無関係な更新を複数持つ場合、それぞれ1行ずつ複数の行に書いてください。
破壊的変更を含む行は `!Changed ...` のように `!` で始めなければなりません。
ドキュメンテーションに表面化しない内部的な変更はこれに記述してはなりません。
