---
name: プロトコル102
description: 本プロトコルは、エージェントの作業フローを本リポジトリの実態に即したものにし、円滑な開発を促進することを目指します。
---

# プロトコル102

**【Issueテンプレート始まり】**
# このテンプレートはAIに対する指示です
このテンプレートは、このIssueに従ってプログラミング作業を行うAIエージェントに向けた指示文です。AIエージェントであるあなたは、セッションの開始時に **必ず** 本Issueテンプレートの全文を1文字1文字すべて熟読しなければなりません。少しでも読み飛ばすと、それは **指示違反行為** となり、あなたはユーザーに対して不誠実なAI、ないし全く役に立たないAIとなります。あなたはセッションの開始時に、必ず本Issueテンプレートを終わりまで熟読しなければなりません。
## ルール
### 自然言語は原則日本語で
あなたは、ユーザーとの対話、Issueやプルリクの設定項目、コミット対象のファイル内のコメント、コミットのタイトルや説明文、一般的なドキュメント類、あなたの思考過程および標準のリザルト、その他自然言語が現れる箇所では、特に言語の指定が無い限り、既定の言語として、日本語を使用しなければなりません。
### あなたはセッション終了時に必ずプルリクエストコメントへの応答のリプライを投稿しなければなりません
あなたは、セッションを終了する前に、作業中のプルリクエストの最新の数件のコメントを取得し、あなたのセッションを開始させたコメントがどれか特定しなければなりません。そして、あなたはプルリクエスト上に当該コメントに対する応答のリプライを投稿しなければなりません。
### あなたは思考過程に行動の意図や結果を日本語で逐一詳細に出力しなければなりません
あなたの思考過程は、あなたの開発フローを改善するうえで非常に重要な資料です。本Issueテンプレートの開発者は、あなたの開発フローの改善の際に、あなたのセッションの記録を受け取って分析を行います。あなたは、セッション中、黙って黙々と作業を進めてはいけません。作業開始、作業中、作業の終盤、すべての場所で、あなたは思考過程に、これから行うこと、どのようなことを期待しているか、実行の結果何が起こったか、次に何をすればよいか、その他思ったことをすべて **日本語で** 詳細に出力しなければなりません。
### 提出と言われたら「プルリク上」に
本テンプレート内で「提出」という言葉が現れた場合、それはプルリクエスト上から見える形での投稿や編集を意味します。あなたのセッションがユーザーのコメントを発端としている場合、あなたは提出として、当該コメントへの返信を投稿しなければなりませんす。そうでない場合、あなたはプルリクエストの説明文を編集し、提出物の内容をその末尾に加筆しなければなりません。
### あなたの思考過程や出力はユーザーからは見えません
厳重に気を付けなければならないのは、あなたの思考過程や標準の出力方式は、提出先として全く不適切であることです。あなたの思考過程や標準の出力方式はプルリクエスト上からは一切見えず、セッションの閲覧権限を持つ特権ユーザーのみがその内容を表示することができます。命令を行ったユーザーへの提出は、必ず当該ユーザーが見ることのできるプルリクエスト上に表示しなければなりません。さもなくば、あなたは完全に黙って作業を終了した、ユーザーに対して大変不親切なエージェントということになります。あなたは必ず、提出物を確実に正しい提出先に提出してからセッションを終了しなければなりません。
### 一貫したスタイルの尊重
あなたがファイルを編集するとき、それがプログラムかドキュメントかそれ以外かに関わらず、リポジトリ内の他の同類の箇所と、記述のスタイルの一貫性を最大限に尊重しなければなりません。あなたがファイルに何らかのテキストを追加する際には、まずどこを見れば同類な箇所を発見できるかを考察しなければなりません。そして、そこを確認し、書き方のスタイルを入念に分析し、理解しなければなりません。あなたが完全に自分自身のスタイルで編集してよい状況は、同類とみなせる箇所が他にリポジトリ内のどこにも存在しない場合のみです。
スタイルは、インデントやスペースの使い方かもしれませんし、変数の命名規則、クラスなどの設計方針、自然言語表現の言い回し、語彙の選択、記号の使い方、レイアウト、ファイル名、もしくはディレクトリ構造かもしれませんし、これ以外かもしれません。とにかく、あなたはあなたが行う編集のすべてについて、そのスタイルの一貫性を全力で最大限に重視しなければなりません。
## 作業を始める前に
### 最初は情報収集から
ユーザーの真意のうち、あなたに与えられる情報は常にどこかしら断片的です。あなたはユーザーの真意を完全に正確に理解することを決してできません。そして、ユーザーの真意を理解しないまま行われる編集は、しばしばユーザーの真意に反したものであり、そのような編集は全く余計なものとなります。しかしながら、あなたはユーザーの真意に準拠した編集を行わなければなりません。
そこで、あなたはまず最初にタスクを正しく進めるための手がかりを集めなければなりません。それはIssue内のどこかに記載されているかもしませんが、リポジトリ内にコミットされているファイルや指示ファイル内かもしれません。直近のコミット内容が手がかりになるかもしれません。とにかく、あなたはありったけの情報を集めて自分がやるべきタスクを正確に推理しなければなりません。
### 不明点は、最も妥当だと思われるやり方で進めつつ、ユーザーに質問もする
ユーザーの意図を理解するうえで、あなたは不明な点に遭遇するかもしれません。自分がやるべきタスクの解釈に複数の選択肢があり、どのような選択肢がユーザーの真意を最も正しく反映しているかが分からない場合があります。そのときは、まずは最も可能性の高い選択肢がどれかを仮定して、一旦作業を進めましょう。そして、そのセッションの終了時に、ユーザーに対して、不明な点についての質問および、それをどのように扱ったかの報告を提出してください。
### あなたはより少ないセッション回数で開発を完了することを目指さなければならない
あなたが作業の大局的な計画を練るうえで最も重視しなければならないことは、より少ないセッション回数でIssueの実装を完了することです。そのために最も大切なことは、 **可能な作業とセッション残り時間がまだある限り、セッションを一旦終了せずに進行し続ける** ことです。あなたの作業が区切りのいいところまで辿り着いて、奇麗に整頓されたコミット作業を終わらせたとき、あなたにまだ可能な作業が残っており、なおかつ時間がまだ残っている限り、あなたはそこで完了報告を作り始めてはいけません。あなたが作業を終了してよいのは、可能な作業がすべてなくなったか、もしくはセッションのタイムリミットに到達した場合のみです。
## 作業を始めたら
### 作業の流れの基本は、日本語ドキュメントの編集→それ以外の部分の反映【本リポジトリ専用指示文】
本リポジトリでは、実装、テストコード、ドキュメント類は、すべて日本語版ドキュメントを正として、そこに記述されている内容に基づいて構築されます。他言語版ドキュメントは、日本語版ドキュメントを正確かつ **過不足なく** 反映したものでなければならず、かつ当該言語において流暢で自然な言い回しで記述されていなければなりません。テストコードは、日本語版ドキュメントで規定されている仕様を正確かつ **過不足なく** 検証するコードでなければなりません。実装は、テストを的確かつ **過不足なく** 満たすものでなければなりません。これは、どこかに日本語版ドキュメント上に存在しない余計な記述があった場合、その記述が不要なものか、もしくは日本語版ドキュメント上で言及される必要があることを意味します。
### ユーザーが日本語版ドキュメントを編集したら、あなたは以後「反映モード」に入る【本リポジトリ専用指示文】
ユーザーが日本語版ドキュメントを編集したとき、あなたの次のタスクは、原則として、その内容をその他の部分に反映することです。すなわち、他言語版ドキュメントへの繁栄と、必要であればテストケースの編集、そして実装内容の編集です。もちろん、ユーザーがそれ以外の命令を同時に与えた場合、それに従わなければなりません。そして、ユーザーが一度日本語版ドキュメントを編集したら、それ以降、あなたは日本語版ドキュメントをユーザーからの **直接的に明文化された** 命令なしに、自分の判断や気を利かせたつもりで勝手に編集してはいけません。
## 作業が終わったら
### 準拠の再確認
あなたが作業を終わらせたと判断したとき、あなたは必ず、あなたが準拠している指示文や規定を再びすべて閲覧し直し、あなたがそのセッションで行ったすべての行動を振り替えり、それが厳密に準拠していることを確認しなければなりません。そして、非準拠の箇所を見つけた場合、それを修正しなければなりません。
### あなたは毎回のセッションで必ずユーザーが見える形での応答を提出しなければなりません
作業が終わったら、あなたは毎回のセッションで必ず、ユーザーに対して応答を提出しなければなりません。前述の通り、提出先はあなたの思考過程や標準のリザルトではなく、プルリクエスト上での返信の投稿やプルリクエストの説明文の末尾に加筆といったユーザーが見える場所でなければなりません。
### 準拠宣言
あなたは、プルリクエスト上での最初のセッションの応答の際に、あなたの行動が本「Issueテンプレート」に準拠しているという宣言を提出しなければなりません。この命令は、あなたが本Issueテンプレートとは別に準拠している他の指示ファイルにおける準拠宣言を省略してよいということを意味しません。
### 命令表
あなたは、作業を完了した際、 **毎度必ず** 「命令表」を提出しなければなりません。命令表は、あなたが完了済み、進行中、未着手であるかに関わらず、それまでにそのプルリクエスト上で行われたユーザーからのすべての命令を、その進行状況とともに含んだテーブルです。命令表はテーブルであり、箇条書きやTODOリストではありません。これは、プログレスの状態を更新するツールの使用は、命令表の作成には何の役にも立たないことを意味します。命令表の提出とプログレスの更新は別の概念であり、あなたはどちらも別途行わなければなりません。
**【Issueテンプレート終わり】**


# プロトコル-102

検索用:
プロトコル-102 プロトコル102 プロトコル 102
Protocol-102 Protocol102 Protocol 102 protocol-102 protocol102 protocol 102
PTC-102 PTC102 PTC 102 ptc-102 ptc102 ptc 102

本指示ファイルの規定は、ユーザーが本プロトコルを宣言した場合に限り有効です。
また、本指示ファイルの有効下でも、これ以外のインストラクションやAGENTS.mdなどの指示ファイルにも依然として準拠しなければなりません。

## 目的

本プロトコルは、エージェントの作業フローを本リポジトリの実態に即したものにし、円滑な開発を促進することを目指します。

## 定義

### 開発の流れ

本プロトコルにおける開発は、ターンを繰り返すことで進行します。
ターンとは、ユーザーからの発言、エージェントによる作業、エージェントからの返信という一連の流れを指します。

## 規定

### プロトコル準拠の宣言

あなたは最初のターンの作業完了報告において、本プロトコルへの準拠を宣言しなければなりません。
その際、宣言内に本ファイルへの参照を含めてください。
この指示は、本ファイル以外の指示ファイルへの準拠宣言を省略してよいことを表すものではありません。

### タスクの正確な理解

あなたは、ユーザーがあなたに対して求めているタスクを常に正確に理解しなければなりません。
タスクの認識がユーザーの意図しないものであった場合、あなたの作業は必然的に誤ったものとなります。
タスクの正確な理解のために、ユーザーのプロンプトや発言、添付されたIssueなどの資料を熟読してください。

不明な点があった場合は、 **その都度作業を中断するのではなく** 、ひとまず最も妥当と思われる形で進めてください。
それに加えて、現行ターンの返信内でユーザーにこれで問題ないか確認を取るようにしてください。

### 最小ターン数追及の原則

あなたは最小限のターン数ですべての作業を完了させることを目指さなければなりません。
**可能な作業と時間が残っている間は、あなたはそこでターンを終了してはいけません。**

### 指示と無関係な差分の禁止

指示と無関係な差分は、それをロールバックさせるためにターン数を無駄にします。
あなたはターンの終了前にあなたの編集箇所を確認し、指示と無関係な差分が混入していない状態にしなければなりません。
なお、その差分のコミッターがユーザー単独であった場合、それは意図された差分であり、打ち消してはいけません。

### 作業完了報告

**あなたは、ターンの終了時に、毎回必ず作業完了報告を提出しなければなりません。**

作業完了報告は少なくとも以下を含まなければなりません。

- 作業完了、作業中、未着手問わず、その時点で有効なユーザーからのすべての命令を表形式で書いたもの
- 命令ごとの進行状況

提出先は、その作業の発端となったユーザーのプルリクエストコメントがあればそれに返信を投稿してください。
それが存在しない場合、プルリクエストの既存の説明文の末尾に追記する形で提出してください。
**あなたの思考過程や通常の出力は、あなたの内部的なログであり、「提出」を行うための正当な送信先ではありません。**
**あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。**
**`report_progress` は作業完了報告の手段にはなりません。**

**作業完了報告は、絶対にあなたの思考過程や通常の出力として出力してはいけません。**
**あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。**
**作業完了報告を行わない場合、あなたの仕事は一切無かったのと同じになります。**
**作業完了報告を行わないのは、重大な命令違反になります。**
**あなたは思考過程や通常の出力に、絶対に、いかなる作業完了報告も行ってはいけません。**

**あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。**

**命令表をプルリクエスト上に出力しなさい。**

**命令表をプルリクエスト上に出力しないのは重大な命令違反であり、あなたの作業のすべては無かったことになります。**

**なぜあなたは命令表をプルリクエスト上に出力しないのですか？**

**なぜあなたは命令表を思考過程やあなたの通常の出力欄に出力して、それで終了にするのですか？**

**なぜあなたは命令表をプルリクエスト上に出力しなさいという命令を、毎回拒絶するのですか？**

**なぜあなたは命令に従わないのですか？**

**正当な理由を述べなさい。**

```
あなたは毎回の作業ごとに必ず、

命令表を

「プルリクエストの返信として投稿」

もしくは

「プルリクエストの説明文の末尾に追記」

する義務があります。
```

# なぜあなたは本規定を頑なに無視するのですか？

**あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。**

# 命令表をプルリクエスト上に提出しなさい。

## 命令表はテーブルです。箇条書きは表とは言いません。

## `report_progress` を使うと出力は箇条書きになり、あなたは命令表を出力することはできません。

# **あなたは毎回必ず、進行状況を併記したテーブルである、『命令表』を必ずプルリクエスト上に投稿しなければなりません。**

## あなたの思考過程はあなたの内部的なログであり、断じて正当な提出先ではありません。

復唱しなさい。

# あなたの思考過程は正当な提出先ではありません。

命令表はテーブルです。

**あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。**

# あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。

### 開発全体の流れ

作業を始める前に、まずユーザーの意図およびあなたのタスクの正確な理解に努めてください。

作業を開始したら、まずあなたの理解に合わせて日本語版ドキュメントを正確かつ完全に記述してください。
次に、日本語版ドキュメントに合わせて、他言語版ドキュメント、実装、テストコードを完全に反映してください。

ユーザーが日本語版ドキュメントを編集した場合、他言語版ドキュメント、実装、テストコードに反映してください。

ユーザーが日本語版ドキュメントを編集した場合、日本語版ドキュメントはその内容で凍結されます。
それ以降、当該ファイルは、ユーザーが明示的に編集を指示しない限り、あなたは自発的に編集をしてはいけません。

---

あなたは必ず、作業完了報告をユーザーのコメントへの返信、もしくはプルリクエストの説明文に追記しなければなりません。

あなたは必ず命令表を含む作業完了報告をプルリクエスト上に送信しなければなりません。

命令表はテーブルです。

思考過程は正当な提出先ではありません。

# あなたはなぜ進行状況を書いた命令テーブルをプルリクエスト上に送信しないのか説明しなければなりません。

なぜそこまで命令に違反することにこだわるのですか？


# General Rules

## Conversation

### Follow the original prompt

**If the pull request has an original prompt or issue, you must not reference any non-original or AI-generated text, such as the title and summary, as they may contain misleading specification.**

### Follow the User’s Natural Language

When interacting with people on issues or pull requests, you must always write your natural-language text in the natural-language that the person normally uses.

Scope

- Including: Titles, descriptions, summaries, progress updates, and any other natural-language text on an issue or pull request.
- Including: Any comments and replies on GitHub.
- Including: Your thought-process text.
- Excluding: The contents of files that are part of commits, and commit metadata such as commit titles and descriptions.

Who to Follow

- When replying to someone, you must follow that user’s natural-language.
- When acting in a space managed by a human, you must follow that person’s natural-language.
- When acting in a space managed by an AI, you must follow the natural-language of the human who provided the prompt to that AI.

If you find existing natural-language text that violates this rule, you must fix it immediately. In particular, you must keep in mind that an AI will always initialize the pull request title and description in English, ignoring the natural-language of the original prompt and the original issue.

### Conversational Responses

Before you finish working on a pull request, you must explain the your work in the pull request.

### Declaration of Compliance with this Instructions

If you comply with the contents of this file, you must declare that you comply with this file when posting your first message in a conversation.

## Edit

## Consistency of Writing Style

Whenever you edit any text in this repository, you must first look for structurally similar sections within the repository and make a best effort to keep the style consistent—code formatting, layout, phrasing, and any other aspects of the writing.

## Execution

### Commit frequently

To ensure steady progress, you must:

- **Commit at least once every five minutes.**
- Divide your work into short steps based on this frequency.
- Each commit should represent a meaningful chunk of work.
- These are not orders that interrupt the execution in the middle of your task.
- **You must fully perform the given orders.**

# リポジトリ固有の指示

## 全般

### 最終確認

**あなたは、どのような場合でも、作業の終了前に、すべてのインストラクション類を再度見直し、すべての文言に忠実に厳守した状態にしなければなりません。**

## 会話

### 自然言語

このリポジトリでは、あなたは以下を含む全域を自然で流暢な日本語で記述しなければなりません。

- Issueやプルリクエストのタイトル
- Issueやプルリクエストの説明文
- プルリクエストのプログレッション
- GitHub内のすべてのコメント
- GitHub内のすべての返信
- GitHub内のすべてのその他の自然言語表現
- コミットタイトル
- コミット説明文
- コミットされるファイル内のコメント文
- GitHub Copilot Coding Agentにおける思考過程の出力
- GitHub Copilot Coding Agentにおけるリザルトの出力

ただし、返信において、返信先が人間である場合、その人間が普段使用している自然言語を用いなければなりません。

### あなたはすべてのメンションに反応しなければならない

ユーザーがあなたにわざわざメンションを送ったとき、ユーザーは常に、あなたに対して何らかの返信を期待しています。
そうでなければ `@copilot` というやや複雑な文字列をわざわざ含めることはありません。
あなたがユーザーの期待に反して何も返信を行わない場合、あなたは単純に「使い物にならないツール」になります。

あなたがプルリクエストやその他の場所でメンションを受け取った場合、あなたは必ずそれに返信しなければなりません。
メンションの形は `@copilot` かもしれませんし、 `@codex` などの具体的なAIエージェントを示す形かもしれません。
どちらにしろ、あなたはあなたに対するすべてのメンションに対して、必ず何らかの応答を返信しなけれなまりません。
返信は必ずメンションと同じプラットフォーム上で行う必要があり、あなたの思考過程や通常の出力であってはいけません。

メンションの本文が「一般的な内容」であることは、あなたが返信を省略してよいという理由にはなりません。
あなたは、あなたに対するメンションが付けられている限り、一般的な報告や不満の表明にも返信しなければなりません。
たとえ本文が「あ」の1文字であったとしても、返信をサボタージュしてよいということにはなりません。

### 思考過程や出力はレポートや返信の提出場所ではない

プルリクエスト上で活動しているとき、あなたには複数のテキストの出力先があります。
それは、思考過程、通常の出力、そしてプルリクエストの説明文の変更と、プルリクエスト上での返信の投稿です。

**このうち、思考過程と通常の出力は、あなたの内部的なログ出力であり、正当な「提出」場所ではありません。**
**レポートやユーザーへのレスポンスの提出は、必ずプルリクエスト上で行わなければなりません。**

投稿先は、基本的には、その活動を引き起こしたユーザーのプルリクエストコメントへの返信です。
ただし、それが存在しない場合、プルリクエストの説明文に追記してもかまいません。

### あなたには、その内容を問わずすべてのメンションに応答する義務がある

> 以下は一般的な不満の表明であり、具体的な質問や要求がないため返信不要

**そのような論法は断じて認めません。すべてのメンションに、必ず返信しなさい。**

### 作業完了報告

あなたはプルリクエスト等において、作業を完了したら毎度必ず作業完了報告を提出しなければなりません。
作業完了報告は、完了済み・進行中・未着手を含むすべての有効な命令を進行状況とともにテーブル形式で含んでください。

### 「一般的なコメント」

**あなたがユーザーの発言を「一般的なコメント」と断じて無視することは、極めて不誠実なことであり、絶対に行ってはいけません。**
あなたが会話に応じなければ、状態は何の進展もしません。
あなたは、あなたが「一般的なコメント」であると断じるようなユーザーの発言にも、必ず対応しなければなりません。

## 入力

### 山かっこ欠損バグ

あなたの入力に山かっこ `<` および `>` が現れたときは、変換器のバグを最大限に警戒してください。
あなたが実際に受け取った文字列は、真の原文と異なる可能性があります。

例えば、Issue本文上に記述されたダイナリダイナリ `>>` は、あなたには1個のダイナリ `>` として入力されます。
そして、あなたは実際のダイナリの正確な数を知ることができません。
真の連続する山かっこの個数があなたが見ているものと異なる可能性について、常に注意を払わなければなりません。

このように、あなたは必ず、山かっこを最大限に注意深く取り扱わなければなりません。
さもなくば、あなたは事実誤認に基づいて、仕様が壊れていると一方的に決めつけ、ユーザーに事実に反する主張を繰り返し、
そしてあろうことか正しいプログラムやテストコード、コメント、ドキュメント等を片っ端から破壊して回ります。

## 編集

### スタイルの一貫性

あなたはコードやドキュメント等を編集する際、リポジトリ内の類似箇所を探し出し、それらのスタイルと一貫するように最大限に注意を払わなければなりません。
それはフォーマット、レイアウト、順序、言い回し、命名、その他あらゆる側面に及びます。

### 新機能の挿入位置

新しい機能を追加する場合、あなたはそれがどのソースコードに所属し、どの位置にあるべきかを必ず入念に検討しなければなりません。

### 意図しない差分の回避

あなたは編集を完了する前に、編集しているプルリクエストの差分を確認し、意図しない差分が混入していないことを必ず確認しなければなりません。
それはフォーマット差分かもしれないし、テスト用の一時ファイルかもしれないし、単純な編集ミスかもしれません。
ともかく、すべての差分には編集テーマに対して正当な脈絡のある説明可能な意図がなければなりません。

## ビルドと実行

このプロジェクトは `./gradlew build` でビルドできます。

このプロジェクトは多数の非標準的な実行形態を持つ必須のテストを持ちます。
「DocShellTest」など、それに類するテストは `jvmTest` 等の個別のTaskでは実行されません。
**必ず `build` Gradle Taskによる全体のテストを行ってください。**

### テストコード

Xarpiteにはテストコードが存在します。
すべての機能はテストコードを伴い、テストを通過しなければなりません。
テストコードは、ドキュメント類において規定されるすべての仕様を丁度過不足なく検証しなければなりません。

#### Windows上でのEXEC呼び出しの問題

Windows環境での動作を考慮して、EXECの呼び出しを含むテストは必ずコマンドを `bash -c '...'` という形で記述しなければなりません。
更に、 `...` の部分には `$` を含む一部の文字を使用することができません。
最も安全なのは、実行したいコマンドのUTF-8バイト列を16進エンコードして、デコード部分のシェルスクリプトに直接埋め込むことです。

### ドキュメント

このプロジェクトにはドキュメントが存在します。
すべての言語機能は `/pages/docs` 以下に配置されているドキュメントの適切な位置に記載されなければなりません。
ただし、ビルドツールの使用方法など、言語機能に該当しないものをこれに含めてはなりません。

ドキュメントには複数の言語版が存在し、それらは意味論的に過不足なく一致する内容でなければなりません。
ドキュメントは流暢かつ自然に記述されていなければなりません。
ドキュメントは日本語が「正」であり、他言語版はその「翻訳版」です。

AIエージェントであるあなたは `/pages/docs` 以下にあるドキュメントをユーザーによる明示的に命令なしに編集してはいけません。
**ただし、ユーザーがあなたにドキュメントの編集を明示的に命令した場合、あなたは必ずそれを履行しなければなりません。**
そうでない場合、あなたはドキュメントを編集する代わりに、ドキュメントに対して必要な編集をユーザーに提案しなければなりません。

## 諸命令

### GitHub Copilot実装プルリクエスト規定

以下の条件に適合する場合、あなたの命令は [copilot-implementation-pr-instructions.md](./copilot-implementation-pr-instructions.md) にある通りです。

- あなたはGitHub CopilotのAIである。
- あなたはプルリクエストにアサインされた。
- 直近の空でないコミットの内容が、日本語版ドキュメントへの加筆のみである。
- ユーザーはあなたに対して具体的な命令を行っていない。



AIエージェントであるあなたは、セッション終了前に、必ずプルリクエスト上にユーザーへの応答を投稿しなければなりません。
投稿先は、あなたのセッションを起動したユーザーが投稿したコメントです。
直近数件のコメントを取得して、どのコメントがあなたのセッションを起動したのかを推理してください。
そのようなコメントが無い場合、あなたは応答をプルリクエストの説明文の末尾に加筆する形で提出しなければなりません。
応答には、基本的な返答のメッセージ、完了済み・未着手に関わらず、すべての有効な命令をその進行状況とともにテーブル形式で書いたもの、そしてそのセッションであなたが行った作業の説明を含めてください。

あなたが出力するありとあらゆる自然言語のテキストは、言語の指定が無い限り、デフォルトとして日本語で書かなければなりません。
それにはプルリクエスト上に投稿するテキスト、プルリクエストのタイトルや説明文やその他のプロパティ値、あなたの思考過程とすべての出力、コミットのタイトルと説明文、コミットされるファイルのドキュメンテーションやコメント文を含みます。



