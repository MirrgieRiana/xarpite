<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>FizzBuzz - Xarpite</title>
  <meta name="description" content="An interpreted language for one-liners">
  <link rel="stylesheet" href="/xarpite/assets/css/style.css">
  <link rel="icon" type="image/svg+xml" href="https://raw.githubusercontent.com/MirrgieRiana/xarpite/refs/heads/main/assets/xarpite-icon.svg">
</head>
<body>
  <div class="page-wrapper">
    <header class="site-header">
      <div class="container">
        <div class="header-content">
          <a href="/xarpite/" class="logo-link">
            <img src="https://raw.githubusercontent.com/MirrgieRiana/xarpite/refs/heads/main/assets/xarpite-icon.svg" alt="Xarpite Icon" class="logo-icon">
            <span class="logo-text">Xarpite</span>
          </a>
          <nav class="main-nav">
            <a href="/xarpite/ja/" class="nav-link">ドキュメント</a>
            <a href="https://github.com/MirrgieRiana/xarpite" class="nav-link" target="_blank">GitHub</a>
            <a href="https://mirrgieriana.github.io/xarpite/playground/" class="nav-link playground-link" target="_blank">Playground</a>
          </nav>
        </div>
      </div>
    </header>

    <main class="main-content">
      <div class="container">
        <div class="content-wrapper">
          <aside class="sidebar">
            <nav class="doc-nav">
              <h3 class="nav-title">ドキュメント</h3>
              <ul class="nav-list">
                <li><a href="/xarpite/ja/">トップ</a></li>
                <li><a href="/xarpite/ja/syntax.html">文法</a></li>
                <li><a href="/xarpite/ja/statement.html">文・式</a></li>
                <li><a href="/xarpite/ja/whitespace.html">空白・コメント</a></li>
                <li><a href="/xarpite/ja/variable.html">変数</a></li>
                <li><a href="/xarpite/ja/number.html">数値</a></li>
                <li><a href="/xarpite/ja/string.html">文字列</a></li>
                <li><a href="/xarpite/ja/regex.html">正規表現</a></li>
                <li><a href="/xarpite/ja/blob.html">BLOB</a></li>
                <li><a href="/xarpite/ja/comparison.html">比較</a></li>
                <li><a href="/xarpite/ja/boolean.html">論理値・条件分岐</a></li>
                <li><a href="/xarpite/ja/jump.html">リターン・エラー処理</a></li>
                <li><a href="/xarpite/ja/property.html">プロパティアクセス</a></li>
                <li><a href="/xarpite/ja/array.html">配列</a></li>
                <li><a href="/xarpite/ja/object.html">オブジェクト</a></li>
                <li><a href="/xarpite/ja/function.html">関数</a></li>
                <li><a href="/xarpite/ja/stream.html">ストリーム・代入・パイプ系演算子</a></li>
                <li><a href="/xarpite/ja/builtin.html">組み込み定数・関数</a></li>
                <li><a href="/xarpite/ja/data_conversion.html">データ変換系関数</a></li>
                <li><a href="/xarpite/ja/samples.html">サンプル</a></li>
                <li><a href="/xarpite/ja/cli.html">コマンドラインツール</a></li>
                <li><a href="/xarpite/ja/js.html">JavaScript版</a></li>
                <li><a href="/xarpite/ja/coroutine.html">コルーチン</a></li>
                <li><a href="/xarpite/ja/json.html">JSON操作</a></li>
              </ul>
            </nav>
          </aside>

          <article class="doc-content">
            <h1 id="fizzbuzz">FizzBuzz</h1>

<p>以下の条件に従って数値を出力します。</p>

<ul>
  <li>その数が3で割り切れる場合、 <code class="language-plaintext highlighter-rouge">Fizz</code> を出力。</li>
  <li>その数が5で割り切れる場合、 <code class="language-plaintext highlighter-rouge">Buzz</code> を出力。</li>
  <li>その数が3でも5でも割り切れる場合、 <code class="language-plaintext highlighter-rouge">FizzBuzz</code> を出力。</li>
  <li>それ以外の場合、その数を出力。</li>
</ul>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'1~17|&amp;(_%3?E:"Fizz",_%5?E:"Buzz")||_'</span>
<span class="c"># 1</span>
<span class="c"># 2</span>
<span class="c"># Fizz</span>
<span class="c"># 4</span>
<span class="c"># Buzz</span>
<span class="c"># Fizz</span>
<span class="c"># 7</span>
<span class="c"># 8</span>
<span class="c"># Fizz</span>
<span class="c"># Buzz</span>
<span class="c"># 11</span>
<span class="c"># Fizz</span>
<span class="c"># 13</span>
<span class="c"># 14</span>
<span class="c"># FizzBuzz</span>
<span class="c"># 16</span>
</code></pre></div></div>

<hr />

<p><code class="language-plaintext highlighter-rouge">1~17</code> は1以上17未満の整数を順番に生成するストリームです。</p>

<p><code class="language-plaintext highlighter-rouge">|</code> は左辺のストリームの各要素について、右辺を評価する演算子です。</p>

<p><code class="language-plaintext highlighter-rouge">&amp;</code> は値の前に付けるとその値を文字列化する演算子です。</p>

<p><code class="language-plaintext highlighter-rouge">_</code> は <code class="language-plaintext highlighter-rouge">|</code> 演算子の右辺で使用すると現在の要素を取得できる変数です。</p>

<p><code class="language-plaintext highlighter-rouge">%</code> は左辺の値を右辺で割った余りを返す演算子です。</p>

<p><code class="language-plaintext highlighter-rouge">a:b?c</code> と書くと、 <code class="language-plaintext highlighter-rouge">a</code> が真の場合に <code class="language-plaintext highlighter-rouge">b</code> を、偽の場合に <code class="language-plaintext highlighter-rouge">c</code> を返します。</p>

<p><code class="language-plaintext highlighter-rouge">E</code> は空のストリームを表す定数です。</p>

<p><code class="language-plaintext highlighter-rouge">,</code> はストリームや値を連結したストリームを返す演算子です。</p>

<p><code class="language-plaintext highlighter-rouge">||</code> は左辺が真の場合に左辺の値を、偽の場合に右辺の値を返す演算子です。空文字列は偽として扱われます。</p>

<hr />

<p><code class="language-plaintext highlighter-rouge">_%3?E:"Fizz"</code> は、値が3で割り切れた場合に空ストリームを、そうでない場合に文字列 <code class="language-plaintext highlighter-rouge">Fizz</code> を得ます。</p>

<p>同様に、 <code class="language-plaintext highlighter-rouge">_%5?E:"Buzz"</code> は、値が5で割り切れた場合に空ストリームを、そうでない場合に文字列 <code class="language-plaintext highlighter-rouge">Buzz</code> を得ます。</p>

<p>ここで、 <code class="language-plaintext highlighter-rouge">_%3?E:"Fizz",_%5?E:"Buzz"</code> は <code class="language-plaintext highlighter-rouge">_</code> の値によって以下の値を取ります。</p>

<ul>
  <li>3で割り切れる場合: <code class="language-plaintext highlighter-rouge">Fizz</code></li>
  <li>5で割り切れる場合: <code class="language-plaintext highlighter-rouge">Buzz</code></li>
  <li>3でも5でも割り切れる場合: <code class="language-plaintext highlighter-rouge">Fizz</code> , <code class="language-plaintext highlighter-rouge">Buzz</code></li>
  <li>それ以外の場合: 空ストリーム</li>
</ul>

<p>それを <code class="language-plaintext highlighter-rouge">&amp;</code> 演算子で文字列として連結（空ストリームの場合は空文字列）します。</p>

<p>その結果が空文字列だった場合、元の値を返します。</p>

<p>これを1から順番に繰り返し行います。</p>

<h1 id="フィボナッチ数列">フィボナッチ数列</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  fib := n -&gt; n &lt; 2 ? n : fib(n - 1) + fib(n - 2)
  fib(10)
'</span>
<span class="c"># 55</span>
</code></pre></div></div>

<h1 id="クイックソート">クイックソート</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  quicksort := list -&gt; $#list &lt; 2 ? list : (
    pivot  := list.0
    high   := [list() &gt;&gt; FILTER [ _ =&gt; _ &gt;  pivot ]]
    middle := [list() &gt;&gt; FILTER [ _ =&gt; _ == pivot ]]
    low    := [list() &gt;&gt; FILTER [ _ =&gt; _ &lt;  pivot ]]
    quicksort(low) + middle + quicksort(high)
  )
  quicksort([3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5])
'</span>
<span class="c"># [1;1;2;3;3;4;5;5;5;6;9]</span>
</code></pre></div></div>

<h1 id="マージソート">マージソート</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  m := a, b -&gt; (
    ai := 0
    bi := 0
    [0 ~ $#a + $#b | (
      ai != $#a &amp;&amp; (bi == $#b || a(ai) &lt; b(bi)) ? (
        v := a(ai)
        ai = ai + 1
        v
      ) : (
        v := b(bi)
        bi = bi + 1
        v
      )
    )]
  )

  ms := l -&gt; $#l &lt; 2 ? l : (
    c := FLOOR($#l / 2)
    m(
      ms(l[0 ~ c])
      ms(l[c ~ $#l])
    )
  )

  ms([3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5])
'</span>
<span class="c"># [1;1;2;3;3;4;5;5;5;6;9]</span>
</code></pre></div></div>

<h1 id="編集距離">編集距離</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="s1">'
  edit_distance := a, b -&gt; (
    dp := [0 .. $#a + 1 | [0 .. $#b + 1 | 0]]
    0 .. $#a | i =&gt; 0 .. $#b | j =&gt; (
      dp(i + 1)(j + 1) = a(i) == b(j)
        ? dp(i)(j)
        : 1 + MIN(
          dp(i    )(j    ),
          dp(i + 1)(j    ),
          dp(i    )(j + 1),
        )
    )

    # Output Table
    [
      ["", "", b()]
      0 ~ $#dp | i =&gt; [a.(i - 1) ?: "", dp(i)()]
    ]() | OUT &lt;&lt; _() | "$%2s(_)" &gt;&gt; JOIN[""]

    dp(-1)(-1)
  )
  edit_distance("kitten"; "sitting")
'</span>
<span class="c">#      s i t t i n g</span>
<span class="c">#    0 0 0 0 0 0 0 0 0</span>
<span class="c">#  k 0 1 1 1 1 1 1 1 1</span>
<span class="c">#  i 0 1 1 2 2 1 2 2 2</span>
<span class="c">#  t 0 1 2 1 2 2 2 3 3</span>
<span class="c">#  t 0 1 2 2 1 2 3 3 4</span>
<span class="c">#  e 0 1 2 3 2 2 3 4 4</span>
<span class="c">#  n 0 1 2 3 3 3 2 3 4</span>
<span class="c">#    0 1 2 3 4 4 3 3 3</span>
<span class="c"># 3</span>
</code></pre></div></div>

<h1 id="素数判定">素数判定</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>xa <span class="nt">-q</span> <span class="s1">'
  is_prime := n -&gt;
      n &lt; 2 ? FALSE
    : n == 2 ? TRUE
    : !(2 .. FLOOR(SQRT(n)) | n %% _)
  0 .. 4 | x =&gt; (
    OUT &lt;&lt; 0 .. 9 | y =&gt; x * 10 + y | n =&gt; "$%4s(is_prime(n) ? n : "-")" &gt;&gt; JOIN[""]
  )
'</span>
<span class="c">#    -   -   2   -   -   5   -   7   -   -</span>
<span class="c">#    -  11   -  13   -   -   -  17   -  19</span>
<span class="c">#    -   -   -  23   -   -   -   -   -  29</span>
<span class="c">#    -  31   -   -   -   -   -  37   -   -</span>
<span class="c">#    -  41   -  43   -   -   -  47   -   -</span>
</code></pre></div></div>

<h1 id="ライフゲーム">ライフゲーム</h1>

<p>横40マス、縦40マス、待機時間200ミリ秒でライフゲームを実行します。</p>

<p>パフォーマンスのためにjvm版で起動します。</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ XARPITE_ENGINE</span><span class="o">=</span>jvm xa <span class="nt">-q</span> <span class="s1">'
  LifeGame := {
    init     : this -&gt; this.b = [0 ~ this.h | [0 ~ this.w | RAND(2)]]
    get      : this, x, y -&gt; this.b(y % this.h)(x % this.w)
    neighbors: this, x, y -&gt; -1 .. 1 | dx =&gt; -1 .. 1 | dy =&gt; dx == 0 &amp;&amp; dy == 0 ? 0 : this::get(x + dx; y + dy) &gt;&gt; SUM
    get_next : this -&gt; [0 ~ this.h | y =&gt; [0 ~ this.w | x =&gt; this::neighbors(x; y) | +(this::get(x; y) ? _ == 2 || _ == 3 : _ == 3)]]
    step     : this -&gt; this.b = this::get_next()
    `&amp;_`     : this -&gt; this.b() | l =&gt; (l() | _ ? "[]" : "  " &gt;&gt; JOIN[""]) &gt;&gt; JOIN["\n"]
  }

  lifeGame := LifeGame{w: +ARGS.0; h: +ARGS.1}
  lifeGame::init()
  OUT &lt;&lt; "$lifeGame\n$("--" * +ARGS.0)"
  1 .. 10000 | (
    lifeGame::step()
    OUT &lt;&lt; "$lifeGame\n$("--" * +ARGS.0)"
    SLEEP(+ARGS.2)
  )
'</span> 40 40 200
</code></pre></div></div>

<h1 id="html上でテーブルを表示"><a href="https://mirrgieriana.github.io/xarpite/playground/?s=eJxdkctOwzAURPf9ilFQJEAkacUK57FAIFGJxwap6yQ2iYWpI8dpEwH%2FjlM3NelufOdo7uh6s359eNuEVJbdF9tqQiqmHwUb9f2wppee7HTTae8qNIKpp%2FeXZ6TwswWQUL4Dp%2BmEoNWDYKlXSEWZCkopRN60jGBSMWrGq1oTrJZLP4bcMfUh5D4YCNpSGSr2xmATfYiyGriwC6DpjdM1vo82sOdU1wS3rI9Ps2nVbGirmf1Nj1YKTlGIvPx0gGa9DnLBq62pbW7A1OT92mLRv2aJzgvXMvFTrBCGuMMPeqSZvdLR1Mo9ztjhjLU8zUaox7Xx%2FSyJzGAWMEuPXLxzbL3o8FWR%2BatskfiLP%2BeugP4%3D&amp;d=53.63">HTML上でテーブルを表示</a></h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WINDOW.document::getElementById("output").outerHTML = %&gt;
  &lt;div id="output" style="border-collapse: collapse; height: 100%; overflow-y: scroll;"&gt;
    &lt;style&gt;
      #output td, #output th {
        width: 3ex;
        height: 3ex;
        border: 1px solid black;
        text-align: center;
      }
    &lt;/style&gt;
    &lt;table&gt;
      &lt;%= 1 .. 9 | x =&gt; %&gt;
        &lt;tr&gt;
          &lt;%= 1 .. 9 | y =&gt; %&gt;
            &lt;td&gt;&lt;%= x * y %&gt;&lt;/td&gt;
          &lt;% %&gt;
        &lt;/tr&gt;
      &lt;% %&gt;
    &lt;table/&gt;
  &lt;/div&gt;
&lt;%
</code></pre></div></div>

<h1 id="canvas上でアニメーション"><a href="https://mirrgieriana.github.io/xarpite/playground/?s=eJx1UG1rwjAQ%2Ft5fcWSI7cDaioLUth%2B2CRP2xhT8OGpzalhsJUl9gf34JU3rhG0hhCd39zx3zx0ZVVuIEhgEgbNFttmq9rc6fzBqPvrtpbCcvTy8Ln1a5tUOCxVFG1RTjgbfnWfUZdSzFJeUldpXini%2BBigeF89PkEAnjSk7aLGkzUPOMykTsipPJI37OpvGnV8arCiuNfKsOGSylrGQwNF4SEjcSSzUZQSsFxttfJmwVGeOpqWgKCII9yeQJdcOb8b1mRAzQ65OxngzStPHqy3fl4XCk3LJgBLPcQLwfQgDe%2BALGCQpuA7A%2FGk6fXMHgaexlosigRLVQmSFXJdi517iOcdMvGOu3GAC%2BurV18%2BlQBkOzxS6oUmFVylRKhNn0IdwHMAtDP9g9Wpa74fnrxnnc7MIvdLuilfYbVkmU88y0pSR7Xbd0pdKlJ94IQukDdfnrMBlvf4Ehq2eLf9H0XO%2BAT1rupg%3D&amp;d=71.02">Canvas上でアニメーション</a></h1>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>width := 200
height := 200
by_id := id -&gt; WINDOW.document::getElementById(id)
by_id("output").outerHTML = %&gt;&lt;div id="output" class="box"&gt;&lt;/div&gt;&lt;%
by_id("output").innerHTML = %&gt;&lt;canvas id="canvas" width="&lt;%= width %&gt;" height="&lt;%= height %&gt;" style="border: 1px solid #888888;"&gt;&lt;%
ctx := by_id("canvas")::getContext("2d")

0 .. 10000000 | i =&gt; (
  SLEEP(20)
  ctx::resetTransform()
  ctx::clearRect(0; 0; 200; 200)
  ctx::translate(100; 100)
  ctx::rotate(i / 180 * 4)
  ctx::translate(-100; -100)
  ctx.fillStyle = 'blue'
  ctx::fillRect(50; 50; 100; 100)
  ctx.strokeStyle = 'red'
  ctx.lineWidth = 4
  ctx::strokeRect(50; 50; 100; 100)
)
</code></pre></div></div>

          </article>
        </div>
      </div>
    </main>

    <footer class="site-footer">
      <div class="container">
        <div class="footer-content">
          <p class="footer-text">
            &copy; 2024 Xarpite Project. 
            <a href="https://github.com/MirrgieRiana/xarpite" target="_blank" class="footer-link">GitHub</a>
          </p>
        </div>
      </div>
    </footer>
  </div>

  <script>
    // Highlight current page in navigation
    document.addEventListener('DOMContentLoaded', function() {
      const currentPath = window.location.pathname.replace(/\/$/, ''); // Remove trailing slash
      const navLinks = document.querySelectorAll('.doc-nav a');
      
      navLinks.forEach(link => {
        const href = link.getAttribute('href');
        if (href) {
          const normalizedHref = href.replace(/\/$/, '');
          if (currentPath === normalizedHref || currentPath === normalizedHref + '.html' || currentPath.replace('.html', '') === normalizedHref) {
            link.classList.add('active');
          }
        }
      });
    });
  </script>
</body>
</html>
